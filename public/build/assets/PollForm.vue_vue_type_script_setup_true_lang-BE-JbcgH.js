import{g as n,o as r,b as t,d as h,k as y,l as w,j as V,t as p,p as k,q as P,C as q,s as x,x as C,i as S,a as v,h as b,u as o,F,y as M,e as E}from"./app-Cmwtn9qV.js";function O(m,l){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule":"evenodd"})])}const U={class:"w-full"},$=["for"],B=["type","id","name"],_=h({__name:"TextInput",props:y({id:{},label:{},placeholder:{},type:{},name:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const l=w(m,"modelValue");return(e,d)=>(r(),n("div",U,[t("label",{for:e.id,class:"block text-sm font-medium text-gray-700"},p(e.label),9,$),V(t("input",{"onUpdate:modelValue":d[0]||(d[0]=c=>l.value=c),type:e.type,id:e.id,name:e.name,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,8,B),[[k,l.value]])]))}}),I={key:0,class:"text-red-500 text-sm"},N={class:"w-full flex items-center space-x-2"},Z={key:0,class:"text-red-500 text-sm"},D={type:"submit",class:"w-full bg-black text-white py-2 rounded-md"},A=h({__name:"PollForm",setup(m){const l=P(null),e=q({question:"",options:[{option:""},{option:""}]});x(()=>{const i=localStorage.getItem("editPoll");if(!i)return;const a=JSON.parse(i);a&&(l.value=a,e.question=l.value.question,e.options=l.value.options.map(u=>({id:u.id,option:u.option})))}),C(()=>{localStorage.removeItem("editPoll")});const d=S(()=>l.value!==null),c=()=>{e.options.push({option:""})},g=()=>{var i;d.value?e.put(route("polls.update",{poll:(i=l.value)==null?void 0:i.id}),{onSuccess:()=>{alert("Poll updated successfully")},onError:()=>{alert("Failed to update poll")}}):e.post(route("polls.store"),{onSuccess:()=>{alert("Poll created successfully"),e.reset(),localStorage.removeItem("editPoll")},onError:()=>{alert("Failed to create poll")}})};return(i,a)=>(r(),n("form",{class:"space-y-6",onSubmit:E(g,["prevent"])},[a[1]||(a[1]=t("h1",{class:"text-2xl font-semibold"},"Create a Poll",-1)),t("div",null,[t("div",null,[v(_,{modelValue:o(e).question,"onUpdate:modelValue":a[0]||(a[0]=u=>o(e).question=u),id:"question",name:"question",label:"Question",placeholder:"What is your favorite color?"},null,8,["modelValue"]),o(e).errors.question?(r(),n("p",I,p(o(e).errors.question),1)):b("",!0)])]),t("div",null,[(r(!0),n(F,null,M(o(e).options,(u,s)=>(r(),n("div",{key:s},[t("div",N,[v(_,{modelValue:o(e).options[s].option,"onUpdate:modelValue":f=>o(e).options[s].option=f,id:"option"+s,name:"option"+s,label:"Option "+(s+1),placeholder:"Red"},null,8,["modelValue","onUpdate:modelValue","id","name","label"]),v(o(O),{onClick:f=>o(e).options.splice(s,1),class:"h-5 w-5 text-red-500 cursor-pointer"},null,8,["onClick"])]),o(e).errors.options&&o(e).errors.options[s]?(r(),n("p",Z,p(o(e).errors.options[s]),1)):b("",!0)]))),128)),t("button",{type:"button",onClick:c,class:"mt-2 p-2 text-sm font-medium bg-blue-500 text-white rounded-md"}," Add Option ")]),t("button",D,p(d.value?"Edit":"Create")+" Poll ",1)],32))}});export{A as _};

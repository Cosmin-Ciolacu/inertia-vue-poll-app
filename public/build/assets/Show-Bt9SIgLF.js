import{d as h,i as b,o as t,g as l,b as e,t as i,A as y,F as p,q as _,c as m,w as g,y as v,h as x,W as V,j as k,B as w,e as $}from"./app-xvPj-Xbg.js";import{_ as B}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DQuSkBDB.js";import"./ApplicationLogo-DfReE0VG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"font-medium"},C={class:"w-full bg-gray-200 rounded-full h-4 mb-2"},F={class:"text-sm text-gray-600"},N=h({__name:"PollOptionWithPercentage",props:{option:{},totalVotes:{}},setup(u){const o=u,s=b(()=>o.totalVotes===0?"0.00":parseInt((o.option.votes/o.totalVotes*100).toString()));return(n,c)=>(t(),l(p,null,[e("p",S,i(o.option.option),1),e("div",C,[e("div",{class:"bg-blue-500 h-4 rounded-full",style:y({width:`${s.value}%`})},null,4)]),e("p",F,i(s.value)+"%",1)],64))}}),W={class:"max-w-2xl mx-auto p-4"},q={class:"text-2xl font-bold mb-4"},D={key:0},E={key:1},O={class:"flex items-center"},P=["value"],L=h({__name:"Show",props:{poll:{}},setup(u){const o=u,s=_(null),n=_(o.poll.has_voted||!1),c=()=>{s.value!==null&&V.post(route("polls.vote",{poll:o.poll.id}),{option_id:s.value},{onSuccess:()=>{n.value=!0},onError:()=>{alert("Failed to vote")}})};return(r,d)=>(t(),m(B,null,{default:g(()=>[e("div",W,[e("h1",q,i(r.poll.question),1),n.value?(t(),l("div",D,[(t(!0),l(p,null,v(r.poll.options,a=>(t(),m(N,{key:a.id,option:a,totalVotes:r.poll.options_sum_votes,class:"mb-4"},null,8,["option","totalVotes"]))),128))])):(t(),l("div",E,[(t(!0),l(p,null,v(r.poll.options,a=>(t(),l("div",{key:a.id,class:"mb-4"},[e("label",O,[k(e("input",{type:"radio",value:a.id,"onUpdate:modelValue":d[0]||(d[0]=f=>s.value=f),class:"mr-2"},null,8,P),[[w,s.value]]),$(" "+i(a.option),1)])]))),128)),n.value?x("",!0):(t(),l("button",{key:0,onClick:c,class:"bg-blue-500 text-white px-4 py-2 rounded"}," Vote "))]))])]),_:1}))}});export{L as default};
